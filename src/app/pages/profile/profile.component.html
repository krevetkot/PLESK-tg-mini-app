<div class="profile-page-container">

<!-- –ë–ª–æ–∫ –ø—Ä–æ—Ñ–∏–ª—è -->
<div class="profile-card">
  <!-- –ê–≤–∞—Ç–∞—Ä —Å –∫–Ω–æ–ø–∫–æ–π —Å–º–µ–Ω—ã -->
  <div class="avatar-section">
    <div class="avatar-container">
      <img [src]="profile.avatar" alt="–ê–≤–∞—Ç–∞—Ä" class="avatar"> <!-- –¥–æ–±–∞–≤–∏—Ç—å –∞–ª—å—Ç –∫–∞—Ä—Ç–∏–Ω–∫—É –¥–ª—è –Ω–æ—É –∞–≤–∞—Ç–∞—Ä–∞ -->
      <label class="avatar-change-btn">
        <input type="file" accept="image/*" (change)="onAvatarChange($event)" hidden>
        üì∑
      </label>
    </div>
  </div>

  <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª—è -->
  <div class="profile-info">
    @if (!isEditing) {
    <div class="info-view">
      <p>{{ profile.firstName }} {{ profile.lastName }}</p>
      <p>{{ profile.phone }}</p>
      <p>{{ profile.organization }}</p>
      <button class="edit-btn" (click)="startEdit()">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</button>
    </div>
    }
<!--      @else {-->
<!--      <div class="info-edit">-->
<!--        <div class="form-group">-->
<!--          <label>–ò–º—è:</label>-->
<!--          <input type="text" [(ngModel)]="editedProfile!.firstName" class="form-input">-->
<!--        </div>-->

<!--        <div class="form-group">-->
<!--          <label>–§–∞–º–∏–ª–∏—è:</label>-->
<!--          <input type="text" [(ngModel)]="editedProfile!.lastName" class="form-input">-->
<!--        </div>-->

<!--        <div class="form-group">-->
<!--          <label>–¢–µ–ª–µ—Ñ–æ–Ω:</label>-->
<!--          <input type="tel" [(ngModel)]="editedProfile!.phone" class="form-input">-->
<!--        </div>-->

<!--        <div class="form-group">-->
<!--          <label>–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è:</label>-->
<!--          <input type="text" [(ngModel)]="editedProfile!.organization" class="form-input">-->
<!--        </div>-->

<!--        <div class="edit-actions">-->
<!--          <button class="save-btn" (click)="saveProfile()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>-->
<!--          <button class="cancel-btn" (click)="cancelEdit()">–û—Ç–º–µ–Ω–∞</button>-->
<!--        </div>-->
<!--      </div>-->
<!--      }-->
  </div>
</div>

</div>

<!-- –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤ -->
<div class="orders-section">
  <h2>–ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤</h2>

  @if (orders.length === 0) {
  <div class="no-orders">
    <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–∫–∞–∑–æ–≤</p>
  </div>
  } @else {
  <div class="orders-list">
    @for (order of orders; track order.id) {
      <div class="order-card">
        <table>
          <tr>
            <td>
              <h3>–ó–∞–∫–∞–∑ ‚Ññ{{ order.orderNumber }}</h3>
            </td>
            <td rowspan="2" class="right-column">
              {{ getStatusText(order.status) }}
            </td>
          </tr>
          <tr>
            <td>
              <span class="order-date">–æ—Ç {{ order.date | date:'dd.MM.yy'}}</span>
            </td>
          </tr>


          @for (item of order.items; track item.product.id) {
            <tr>
              <td>
                {{ item.product.name }}
              </td>
              <td rowspan="2" class="right-column">
                {{ item.total}} ‚ÇΩ
              </td>
            </tr>
            <tr>
              <td>
                <span>{{ item.quantity }} —à—Ç. √ó {{ item.product.price}} ‚ÇΩ </span>
              </td>
            </tr>
          }

            <tr>
              <td>
                <strong>–ò—Ç–æ–≥–æ:</strong>
              </td>
              <td class="right-column">
                <strong>{{ order.total}} ‚ÇΩ</strong>
              </td>
            </tr>
        </table>
      </div>
  }
  </div>
  }
</div>

