<div class="cart-container">
  <!-- Пустая корзина -->
  @if (isEmpty) {
  <div class="empty-cart">
    <img src="sad_mascot.png">
    <h2>В корзине пока пусто</h2>
  </div>
  }

  <!-- Корзина с товарами -->
  @if (!isEmpty) {
  <div class="cart-content">
    <h1 class="cart-title">Корзина</h1>

    <div class="cart-items">
      @for (item of orderItems; track item.GUID) {
  <div class="cart-item">
    <div class="item-image">
      <img [src]="item.file" [alt]="item.name" loading="lazy">
    </div>

    <div class="item-details">
      <h3 class="item-name">{{ item.name }}</h3>
      <p class="item-price">{{ item.price }} р./шт</p>

      <button class="remove-btn" (click)="removeItem(item.GUID)">×</button>

      <div class="quantity-controls">
        <button
          class="quantity-btn minus"
          (click)="decreaseQuantity(item)"
          [disabled]="item.count <= 1"
        >
          −
        </button>

        <input
          type="number"
          [value]="item.count"
          (change)="updateQuantity(item, $event)"
          min="1"
          class="quantity-input"
        >

        <button
          class="quantity-btn plus"
          (click)="increaseQuantity(item)"
        >
          +
        </button>
      </div>

      <div class="item-total">
        <span class="total-price">Итого: {{ (item.price * item.count) }} р.</span>
      </div>
    </div>

  </div>
  }
  </div>

  <!-- Блок оформления заказа -->
  <div class="checkout-section">
    <div class="shipping-date">
      <label for="shippingDate">Дата отгрузки:</label>
      <input
        type="date"
        id="shippingDate"
        [(ngModel)]="shippingDate"
        [min]="getShippingMinDate()"
        [max]="getShippingMaxDate()"
        class="date-input"
      >
    </div>

      <!-- Комментарий к заказу -->
    <div class="order-comment">
      <label for="orderComment" >Комментарий к заказу: </label>
      <textarea
        id="orderComment"
        [(ngModel)]="orderComment"
        class="comment-textarea"
        rows="4"
      ></textarea>
    </div>

    <div class="order-summary">
      <div class="total-line">
        <span class="total-label"> Сумма заказа:</span>
        <span class="total-amount">{{ totalAmount }} p.</span>
          </div>
        </div>
      </div>
          <button class="checkout-btn" (click)="checkout()">
            Оформить заказ
          </button>
    </div>
  }
</div>
