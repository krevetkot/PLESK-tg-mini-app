<!-- Фиксированная строка поиска -->
<div class="search-header" [class.sticky]="isSticky">
  <div class="search-container">
    <div class="search-box">
      <input
        type="text"
        [(ngModel)]="searchTerm"
        (input)="searchProducts()"
        placeholder="Поиск товаров..."
        class="search-input"
      >
      <button
        *ngIf="searchTerm"
        (click)="clearSearch()"
        class="clear-btn"
      >
        ×
      </button>
    </div>
    <div class="search-results" *ngIf="searchTerm">
      Найдено: {{ filteredProducts.length }} товаров
    </div>
  </div>
</div>

<!-- Кнопки фильтрации -->
<div class="filters-container" [class.sticky]="isSticky">
  <div class="filters">
    <button
      *ngFor="let category of categories"
      (click)="filterByCategory(category)"
      [class.active]="selectedCategory === category"
      class="filter-btn"
    >
      {{ category }}
    </button>
  </div>
</div>

<div class="products-container">
  <!-- Заголовок и сортировка -->
  <div class="products-header">
    <h2 class="products-title">Все товары</h2>
    <div class="sort-container">
      <select [(ngModel)]="selectedSort" (change)="sortProducts()" class="sort-select">
        <option value="name">По алфавиту</option>
        <option value="price-asc">По возрастанию цены</option>
        <option value="price-desc">По убыванию цены</option>
      </select>
    </div>
  </div>

  <!-- Загрузка -->
  @if (loading) {
  <div class="loading">
    <div class="spinner"></div>
    <p>Загружаем товары...</p>
  </div>
  }

  <!-- Сообщение если нет товаров -->
  @if (!loading && filteredProducts.length === 0) {
  <div class="no-products">
    @if (searchTerm) {
  <h3>Товары не найдены</h3>
  <p>Попробуйте изменить запрос</p>
  } @else {
  <h3>Товары не найдены</h3>
  <p>Попробуйте зайти позже</p>
  }
  </div>
  }

  <!-- Сетка товаров -->
  @if (!loading && filteredProducts.length > 0) {
  <div class="products-grid">
    @for (product of filteredProducts; track product.GUID) {
  <div class="product-card" (click)="navigateToItemPage(product.GUID)">
    <!-- Изображение товара -->
    <div class="product-image-container">
      <img [src]="product.file" alt="Нет фото" loading="lazy" class="product-img">
    </div>

    <div class="product-info">
      <h3 class="product-name">{{ product.name }}</h3>
      <div class="product-price">
        {{ product.price }} ₽
      </div>
    </div>
  </div>
  }
  </div>
  }
</div>
